<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Calculator - Textile Engineering Suite</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Header styles */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        header h1 i {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-controls {
            display: flex;
            gap: 15px;
        }

        .toggle-mode {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .toggle-mode:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        .toggle-mode:active {
            transform: translateY(0);
        }

        .toggle-mode i {
            font-size: 1rem;
        }

        /* Dark mode styles */
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e2e8f0;
        }

        body.dark-mode header {
            background: rgba(30, 30, 50, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode header h1 {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode header h1 i {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .toggle-mode {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            box-shadow: 0 4px 15px rgba(96, 165, 250, 0.3);
        }

        body.dark-mode .toggle-mode:hover {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 6px 20px rgba(96, 165, 250, 0.4);
        }

        /* Calculator styles - adjusted for new layout */
        .calculator-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
        }
        
        .calculator-container {
            display: flex;
            gap: 20px;
            max-width: 800px;
            width: 100%;
        }
        
        .calculator {
            width: 360px;
            background-color: #2c3e50;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .display {
            padding: 20px;
            text-align: right;
            background-color: #34495e;
            color: white;
            min-height: 80px;
            position: relative;
        }
        
        .history {
            font-size: 14px;
            opacity: 0.7;
            min-height: 20px;
        }
        
        .current-input {
            font-size: 28px;
            margin-top: 10px;
            word-wrap: break-word;
        }
        
        .mode-indicator {
            position: absolute;
            left: 10px;
            top: 10px;
            font-size: 12px;
            background-color: #1abc9c;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .shift-indicator {
            position: absolute;
            left: 10px;
            top: 30px;
            font-size: 12px;
            background-color: #9b59b6;
            padding: 2px 5px;
            border-radius: 3px;
            display: none;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            background-color: #34495e;
        }
        
        .calculator button {
            border: none;
            padding: 20px 0;
            font-size: 18px;
            cursor: pointer;
            background-color: #2c3e50;
            color: white;
            transition: all 0.2s;
        }
        
        .calculator button:hover {
            background-color: #3d566e;
        }
        
        .calculator button:active {
            transform: scale(0.95);
        }
        
        .function {
            background-color: #3498db;
        }
        
        .function:hover {
            background-color: #2980b9;
        }
        
        .operator {
            background-color: #e67e22;
        }
        
        .operator:hover {
            background-color: #d35400;
        }
        
        .equals {
            background-color: #2ecc71;
        }
        
        .equals:hover {
            background-color: #27ae60;
        }
        
        .shift {
            background-color: #9b59b6;
        }
        
        .shift:hover {
            background-color: #8e44ad;
        }
        
        .mode {
            background-color: #1abc9c;
        }
        
        .mode:hover {
            background-color: #16a085;
        }
        
        .digit {
            background-color: #34495e;
        }
        
        .digit:hover {
            background-color: #3d566e;
        }
        
        .active-shift {
            box-shadow: 0 0 10px #9b59b6;
        }
        
        .active-mode {
            box-shadow: 0 0 10px #1abc9c;
        }
        
        .history-panel {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            max-height: 500px;
        }
        
        .history-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .history-items {
            overflow-y: auto;
            flex-grow: 1;
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 10px;
        }
        
        .history-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .history-item:hover {
            background-color: #f9f9f9;
        }
        
        .history-expression {
            font-weight: bold;
        }
        
        .history-result {
            color: #3498db;
            margin-left: 10px;
        }
        
        .clear-history {
            margin-top: 15px;
            padding: 8px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .clear-history:hover {
            background-color: #c0392b;
        }

        /* Dark mode for calculator components */
        body.dark-mode .history-panel {
            background-color: rgba(30, 30, 50, 0.95);
            color: #e2e8f0;
            backdrop-filter: blur(10px);
        }

        body.dark-mode .history-title {
            color: #e2e8f0;
        }

        body.dark-mode .history-items {
            border-color: rgba(255, 255, 255, 0.1);
            background-color: rgba(0, 0, 0, 0.2);
        }

        body.dark-mode .history-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
                padding: 20px;
            }

            header h1 {
                font-size: 1.8rem;
            }

            header h1 i {
                font-size: 1.6rem;
            }

            .toggle-mode {
                font-size: 0.8rem;
                padding: 10px 16px;
            }

            .calculator-container {
                flex-direction: column;
                align-items: center;
            }

            .calculator {
                width: 100%;
                max-width: 360px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <header>
            <h1><i class="fas fa-industry"></i> Textile Engineering Suite</h1>
            <div class="header-controls">
                <button class="toggle-mode" onclick="toggleDarkMode()">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
            </div>
        </header>
        <div style="margin-bottom: 20px;">
            <a href="Textile Engineering Suite.html" class="toggle-mode" style="display: inline-block; text-decoration: none;">
                <i class="fas fa-home"></i> Home
            </a>
        </div>
    </div>

    <div class="calculator-wrapper">
        <div class="calculator-container">
            <div class="calculator">
                <div class="display">
                    <div class="mode-indicator" id="mode-indicator">DEG</div>
                    <div class="shift-indicator" id="shift-indicator">SHIFT</div>
                    <div class="history" id="history"></div>
                    <div class="current-input" id="current-input">0</div>
                </div>
                <div class="buttons">
                    <!-- Row 1 -->
                    <button class="shift" id="shift-btn" onclick="handleShift()">Shift</button>
                    <button class="mode" id="mode-btn" onclick="handleMode()">Mode</button>
                    <button class="function" onclick="addToInput('(')">(</button>
                    <button class="function" onclick="addToInput(')')">)</button>
                    <button class="function" onclick="clearInput()">AC</button>
                    
                    <!-- Row 2 -->
                    <button class="function" id="sin-btn" onclick="addFunction('sin')">sin</button>
                    <button class="function" id="cos-btn" onclick="addFunction('cos')">cos</button>
                    <button class="function" id="tan-btn" onclick="addFunction('tan')">tan</button>
                    <button class="operator" onclick="addToInput('^')">^</button>
                    <button class="operator" onclick="addToInput('√(')">√</button>
                    
                    <!-- Row 3 -->
                    <button class="function" id="log-btn" onclick="addFunction('log(')">log</button>
                    <button class="function" id="ln-btn" onclick="addFunction('ln(')">ln</button>
                    <button class="function" onclick="addToInput('π')">π</button>
                    <button class="operator" onclick="addToInput('*')">×</button>
                    <button class="operator" onclick="addToInput('/')">÷</button>
                    
                    <!-- Row 4 -->
                    <button class="function" onclick="addToInput('e')">e</button>
                    <button class="function" onclick="addFunction('fact(')">n!</button>
                    <button class="function" onclick="addToInput('²')">x²</button>
                    <button class="operator" onclick="addToInput('+')">+</button>
                    <button class="operator" onclick="addToInput('-')">-</button>
                    
                    <!-- Row 5 - All digits grouped together -->
                    <button class="digit" onclick="addToInput('7')">7</button>
                    <button class="digit" onclick="addToInput('8')">8</button>
                    <button class="digit" onclick="addToInput('9')">9</button>
                    <button class="digit" onclick="addToInput('4')">4</button>
                    <button class="digit" onclick="addToInput('5')">5</button>
                    
                    <!-- Row 6 -->
                    <button class="digit" onclick="addToInput('6')">6</button>
                    <button class="digit" onclick="addToInput('1')">1</button>
                    <button class="digit" onclick="addToInput('2')">2</button>
                    <button class="digit" onclick="addToInput('3')">3</button>
                    <button class="function" onclick="addToInput('|')">|x|</button>
                    
                    <!-- Row 7 -->
                    <button class="digit" onclick="addToInput('0')">0</button>
                    <button class="digit" onclick="addToInput('.')">.</button>
                    <button class="function" onclick="addToInput('%')">%</button>
                    <button class="function" onclick="addToInput('1/')">1/x</button>
                    <button class="equals" onclick="calculate()">=</button>
                </div>
            </div>
            
            <div class="history-panel">
                <div class="history-title">Calculation History</div>
                <div class="history-items" id="history-items"></div>
                <button class="clear-history" onclick="clearHistory()">Clear History</button>
            </div>
        </div>
    </div>

    <script>
        let currentInput = '0';
        let calculationHistory = '';
        let isShiftActive = false;
        let currentMode = 'deg'; // 'deg' or 'rad'
        let savedCalculations = JSON.parse(localStorage.getItem('calculatorHistory')) || [];
        
        const currentInputElement = document.getElementById('current-input');
        const historyElement = document.getElementById('history');
        const modeIndicator = document.getElementById('mode-indicator');
        const shiftIndicator = document.getElementById('shift-indicator');
        const shiftBtn = document.getElementById('shift-btn');
        const modeBtn = document.getElementById('mode-btn');
        const historyItemsContainer = document.getElementById('history-items');
        
        // Dark mode toggle function
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const toggleBtn = document.querySelector('.toggle-mode');
            const icon = toggleBtn.querySelector('i');
            
            if (document.body.classList.contains('dark-mode')) {
                icon.className = 'fas fa-sun';
                toggleBtn.childNodes[2].textContent = ' Light Mode';
            } else {
                icon.className = 'fas fa-moon';
                toggleBtn.childNodes[2].textContent = ' Dark Mode';
            }
        }
        
        // Key mappings
        const keyMap = {
            '0': '0', '1': '1', '2': '2', '3': '3', '4': '4',
            '5': '5', '6': '6', '7': '7', '8': '8', '9': '9',
            '.': '.', '+': '+', '-': '-', '*': '*', '/': '/',
            '^': '^', '(': '(', ')': ')', '%': '%', '=': '=',
            'Enter': '=', 'Escape': 'AC', 'Backspace': 'backspace',
            's': 'sin', 'c': 'cos', 't': 'tan', 'l': 'log(',
            'n': 'ln(', 'p': 'π', 'e': 'e', '!': 'fact(',
            'q': '√(', '|': '|', '\\': '1/', 'd': '10^',
            'E': 'E', 'm': 'mode', 'Shift': 'shift',
            '²': '²', 'x': '²', 'r': '√('
        };
        
        // Initialize the calculator
        function init() {
            updateDisplay();
            renderHistory();
        }
        
        function updateDisplay() {
            currentInputElement.textContent = currentInput;
            historyElement.textContent = calculationHistory;
            modeIndicator.textContent = currentMode === 'deg' ? 'DEG' : 'RAD';
            
            if (isShiftActive) {
                shiftIndicator.style.display = 'block';
                shiftBtn.classList.add('active-shift');
            } else {
                shiftIndicator.style.display = 'none';
                shiftBtn.classList.remove('active-shift');
            }
        }
        
        function addToInput(value) {
            if (value === 'backspace') {
                if (currentInput.length === 1) {
                    currentInput = '0';
                } else {
                    currentInput = currentInput.slice(0, -1);
                }
                updateDisplay();
                return;
            }
            
            if (currentInput === '0' && value !== '.' && !isNaN(value) === false && value !== '-') {
                currentInput = value;
            } else {
                currentInput += value;
            }
            updateDisplay();
        }
        
        function addFunction(func) {
            if (isShiftActive) {
                // Handle inverse functions
                switch(func) {
                    case 'sin': func = 'asin('; break;
                    case 'cos': func = 'acos('; break;
                    case 'tan': func = 'atan('; break;
                    case 'log(': func = '10^'; break;
                    case 'ln(': func = 'e^'; break;
                    case '√(': func = '²'; break;
                    case '²': func = '√('; break;
                }
                isShiftActive = false;
                updateDisplay();
            }
            
            if (currentInput === '0') {
                currentInput = func;
            } else {
                currentInput += func;
            }
            updateDisplay();
        }
        
        function clearInput() {
            currentInput = '0';
            calculationHistory = '';
            updateDisplay();
        }
        
        function handleShift() {
            isShiftActive = !isShiftActive;
            updateDisplay();
        }
        
        function handleMode() {
            currentMode = currentMode === 'deg' ? 'rad' : 'deg';
            modeBtn.classList.add('active-mode');
            setTimeout(() => modeBtn.classList.remove('active-mode'), 200);
            updateDisplay();
        }
        
        function calculate() {
            try {
                // Replace visual representations with JavaScript equivalents
                let expression = currentInput
                    .replace(/×/g, '*')
                    .replace(/÷/g, '/')
                    .replace(/π/g, 'Math.PI')
                    .replace(/e/g, 'Math.E')
                    .replace(/√\(/g, 'Math.sqrt(')
                    .replace(/\^/g, '**')
                    .replace(/%/g, '/100')
                    .replace(/\|([^|]+)\|/g, 'Math.abs($1)')
                    .replace(/fact\(/g, 'factorial(')
                    .replace(/1\//g, '1/')
                    .replace(/E/g, '*10**')
                    .replace(/10\^/g, '10**')
                    .replace(/e\^/g, 'Math.exp(')
                    .replace(/([\d\)])\²/g, '$1**2'); // Handle square
                
                // Handle trigonometric functions based on current mode
                if (currentMode === 'deg') {
                    expression = expression
                        .replace(/sin\(/g, 'Math.sin(Math.PI/180*')
                        .replace(/cos\(/g, 'Math.cos(Math.PI/180*')
                        .replace(/tan\(/g, 'Math.tan(Math.PI/180*')
                        .replace(/asin\(/g, '180/Math.PI*Math.asin(')
                        .replace(/acos\(/g, '180/Math.PI*Math.acos(')
                        .replace(/atan\(/g, '180/Math.PI*Math.atan(');
                } else {
                    expression = expression
                        .replace(/sin\(/g, 'Math.sin(')
                        .replace(/cos\(/g, 'Math.cos(')
                        .replace(/tan\(/g, 'Math.tan(')
                        .replace(/asin\(/g, 'Math.asin(')
                        .replace(/acos\(/g, 'Math.acos(')
                        .replace(/atan\(/g, 'Math.atan(');
                }
                
                // Handle logarithms
                expression = expression
                    .replace(/log\(/g, 'Math.log10(')
                    .replace(/ln\(/g, 'Math.log(');
                
                // Custom factorial function
                function factorial(n) {
                    if (n < 0) return NaN;
                    let result = 1;
                    for (let i = 2; i <= n; i++) result *= i;
                    return result;
                }
                
                // Evaluate the expression
                calculationHistory = currentInput + ' =';
                const result = eval(expression);
                
                // Save to history
                savedCalculations.unshift({
                    expression: currentInput,
                    result: result.toString()
                });
                
                // Keep only the last 50 calculations
                if (savedCalculations.length > 50) {
                    savedCalculations.pop();
                }
                
                // Save to localStorage
                localStorage.setItem('calculatorHistory', JSON.stringify(savedCalculations));
                
                currentInput = result.toString();
                updateDisplay();
                renderHistory();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }
        
        function renderHistory() {
            historyItemsContainer.innerHTML = '';
            
            if (savedCalculations.length === 0) {
                historyItemsContainer.innerHTML = '<div style="color: #999; text-align: center; padding: 20px;">No history yet</div>';
                return;
            }
            
            savedCalculations.forEach((calc, index) => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <span class="history-expression">${calc.expression}</span>
                    <span class="history-result">= ${calc.result}</span>
                `;
                item.addEventListener('click', () => {
                    currentInput = calc.expression;
                    updateDisplay();
                });
                historyItemsContainer.appendChild(item);
            });
        }
        
        function clearHistory() {
            savedCalculations = [];
            localStorage.setItem('calculatorHistory', JSON.stringify(savedCalculations));
            renderHistory();
        }
        
        // Keyboard event listener
        document.addEventListener('keydown', (e) => {
            const key = e.key;
            
            // Check if key is mapped
            if (keyMap.hasOwnProperty(key)) {
                e.preventDefault();
                const value = keyMap[key];
                
                // Handle special cases
                if (value === 'AC') {
                    clearInput();
                } else if (value === '=') {
                    calculate();
                } else if (value === 'shift') {
                    handleShift();
                } else if (value === 'mode') {
                    handleMode();
                } else if (value === 'backspace') {
                    addToInput('backspace');
                } else if (['sin', 'cos', 'tan', 'log(', 'ln('].includes(value)) {
                    addFunction(value);
                } else {
                    addToInput(value);
                }
                
                // Visual feedback for button press
                const button = findButtonByValue(value);
                if (button) {
                    button.classList.add('active');
                    setTimeout(() => button.classList.remove('active'), 100);
                }
            }
        });
        
        // Helper function to find button by value
        function findButtonByValue(value) {
            const buttons = document.querySelectorAll('.buttons button');
            for (const button of buttons) {
                if (button.textContent === value || 
                    (value === '-' && button.textContent === '-') ||
                    (value === '1/' && button.textContent === '1/x') ||
                    (value === '|' && button.textContent === '|x|') ||
                    (value === '^' && button.textContent === '^') ||
                    (value === '√(' && button.textContent === '√') ||
                    (value === 'fact(' && button.textContent === 'n!') ||
                    (value === '10^' && button.textContent === '10^x') ||
                    (value === 'E' && button.textContent === 'EXP') ||
                    (value === '²' && button.textContent === 'x²')) {
                    return button;
                }
            }
            return null;
        }
        
        // Initialize the calculator
        init();
    </script>

    <!-- Add this above </body> -->
<div id="global-countdown" style="position:fixed;bottom:30px;right:30px;z-index:9999;background:#007bff;color:#fff;padding:18px 28px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,0.18);font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:16px;">
  <span id="countdown-label"><i class="fas fa-gift"></i> FREE Only for Seven Days:</span>
  <span id="countdown-timer"></span>
</div>
<div id="payment-contact" style="display:none;position:fixed;bottom:30px;right:30px;z-index:9999;background:#dc3545;color:#fff;padding:18px 28px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,0.18);font-size:1.2rem;font-weight:600;">
  <i class="fas fa-lock"></i> FREE period ended.<br>
  <a href="contact.html" style="color:#fff;text-decoration:underline;font-weight:700;">Payment For Contact</a>
</div>
<script>
// filepath: c:\Users\DELL\OneDrive\Desktop\Abhishek\HTML\Self Projects\Textile Calculations\index.html
// ...existing code...

(function(){
  // Set target end date/time: 21 Aug 2025, 13:00 local time
  const endDate = new Date(2025, 6, 29, 13, 0, 0); // Month is 0-based (7=August)
  const countdownDiv = document.getElementById('global-countdown');
  const timerSpan = document.getElementById('countdown-timer');
  const paymentDiv = document.getElementById('payment-contact');

  function updateCountdown() {
    const now = new Date();
    const diff = endDate - now;
    if (diff > 0) {
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff / (1000*60*60)) % 24);
      const mins = Math.floor((diff / (1000*60)) % 60);
      const secs = Math.floor((diff / 1000) % 60);
      timerSpan.textContent = `${days}d ${hours}h ${mins}m ${secs}s`;
    } else {
      // Time expired: redirect to contact.html
      window.location.href = "contact.html";
      clearInterval(timer);
    }
  }
  updateCountdown();
  const timer = setInterval(updateCountdown, 1000);
})();
// ...existing code...
</script>
</body>
</html>

